<!DOCTYPE html>
<!-- This site was created in Webflow. http://www.webflow.com-->
<!-- Last Published: Fri Nov 13 2015 01:48:45 GMT+0000 (UTC) -->
<html data-wf-site="56414d6fc8c27cad0f4e12e7" data-wf-page="5643ac587b1f28dc58ed6b89">
<head>
  <meta charset="utf-8">
  <title>Clojure - Transducers are Coming</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="generator" content="Webflow">
  <link rel="stylesheet" type="text/css" href="../../../../css/normalize.css">
  <link rel="stylesheet" type="text/css" href="../../../../css/webflow.css">
  <link rel="stylesheet" type="text/css" href="../../../../css/clojureorg.webflow.css">
  <link rel="stylesheet" type="text/css" href="../../../../css/asciidoctor-mod.css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
  <script>
    WebFont.load({
      google: {
        families: ["Open Sans:300,300italic,400,400italic,600,600italic","PT Serif:400,400italic,700,700italic","Source Code Pro:regular,500"]
      }
    });
  </script>
  <script type="text/javascript" src="../../../../js/modernizr.js"></script>
  <link rel="shortcut icon" type="image/x-icon" href="../../../../images/clojure-logo-icon-32.png">
  <link rel="apple-touch-icon" href="../../../../images/clojure-logo-icon-256.png">
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4857754-16'], ['_trackPageview']);
    (function() {
      var ga = document.createElement('script');
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>
<body>
  <div data-collapse="none" data-animation="default" data-duration="400" data-contain="1" class="w-nav clj-navbar">
    <div class="w-container">
      <a href="http://igeldev.github.io/clojure-site-russian/index" class="w-nav-brand w-clearfix clj-logo-container"><img width="60" src="../../../../images/clojure-logo-120b.png" class="clj-logo">
        <div class="clj-logo-text">Clojure</div>
      </a>
      <nav role="navigation" class="w-nav-menu clj-nav-menu"><a href="http://igeldev.github.io/clojure-site-russian/about/rationale" class="w-nav-link clj-nav-link">Overview</a><a href="http://igeldev.github.io/clojure-site-russian/reference/documentation" class="w-nav-link clj-nav-link">Reference‍</a><a href="http://igeldev.github.io/clojure-site-russian/api/api" class="w-nav-link clj-nav-link">API</a><a href="http://igeldev.github.io/clojure-site-russian/community/downloads" class="w-nav-link clj-nav-link">Releases</a><a href="http://igeldev.github.io/clojure-site-russian/guides/guides" class="w-nav-link clj-nav-link">Guides</a><a href="http://igeldev.github.io/clojure-site-russian/community/resources" class="w-nav-link clj-nav-link">Community</a><a href="http://igeldev.github.io/clojure-site-russian/news/news" class="w-nav-link clj-nav-link">News</a><a href="#" data-ix="search-click-trigger" class="w-nav-link clj-nav-link clj-nav-search"></a>
      </nav>
      <div class="w-nav-button clj-menu-button">
        <div class="w-icon-nav-menu"></div>
      </div>
    </div>
  </div>
  <div data-ix="hide-search" class="w-section clj-search-section">
    <div class="w-container">
      <div class="w-form clj-search-form-wrapper">
        <form id="wf-form-Search-Form" name="wf-form-Search-Form" data-name="Search Form" action="http://igeldev.github.io/clojure-site-russian/search" method="get">
          <div class="w-row">
            <div class="w-col w-col-9 w-col-small-9">
              <input id="q" type="text" placeholder="Search clojure.org reference, guides, and API" name="q" data-name="q" autofocus="autofocus" class="w-input clj-search-input">
            </div>
            <div class="w-col w-col-3 w-col-small-3">
              <input type="submit" value="Search" data-wait="Please wait..." class="w-button clj-search-submit">
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

<div class="w-section clj-content-section">
  <div class="w-container">
    <div class="clj-section-nav-container">
      <div data-collapse="small" data-animation="default" data-duration="200" data-contain="1" class="w-nav clj-section-navbar">
        <div class="w-container">
          <nav role="navigation" class="w-nav-menu clj-section-nav-menu">
                <a href="http://igeldev.github.io/clojure-site-russian/news/2016/01/28/state-of-clojure-2015.html" class="w-nav-link clj-section-nav-item-link">State of Clojure 2015 survey results</a>
                <a href="http://igeldev.github.io/clojure-site-russian/news/2016/01/19/clojure18.html" class="w-nav-link clj-section-nav-item-link">Clojure 1.8 is now available</a>
                <a href="http://igeldev.github.io/clojure-site-russian/news/2016/01/14/clojure-org-live.html" class="w-nav-link clj-section-nav-item-link">Welcome to the new clojure.org!</a>
                <a href="http://igeldev.github.io/clojure-site-russian/news/2015/06/30/clojure-17.html" class="w-nav-link clj-section-nav-item-link">Clojure 1.7 is now available</a>
                <a href="http://igeldev.github.io/clojure-site-russian/news/2014/08/06/transducers-are-coming.html" class="w-nav-link clj-section-nav-item-link">Transducers are Coming</a>
                <a href="http://igeldev.github.io/clojure-site-russian/news/2013/06/28/clojure-clore-async-channels.html" class="w-nav-link clj-section-nav-item-link">Clojure core.async Channels</a>
                <a href="http://igeldev.github.io/clojure-site-russian/news/2012/02/17/clojure-governance.html" class="w-nav-link clj-section-nav-item-link">Clojure Governance and How It Got That Way</a>
                <a href="http://igeldev.github.io/clojure-site-russian/news/2011/07/22/introducing-clojurescript.html" class="w-nav-link clj-section-nav-item-link">Introducing ClojureScript</a>
          </nav>
          <div data-ix="toggle-section-nav-icon" class="w-nav-button w-clearfix clj-section-nav-toggle">
            <div class="clj-section-nav-text">Transducers are Coming</div>
            <div class="clj-section-nav-icon-closed"></div>
            <div data-ix="init-hide-section-nav-icon-open" class="clj-section-nav-icon-open"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="clj-content-container">
      <h1>Transducers are Coming</h1>
      <p><em>06 August 2014</em><br/>
         <em>Rich Hickey</em></p>

      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Transducers are a powerful and composable way to build algorithmic transformations that you can reuse in many contexts, and they&#8217;re coming to Clojure core and core.async.</p>
</div>
<div class="paragraph">
<p>Two years ago, in a <a href="http://clojure.com/blog/2012/05/15/anatomy-of-reducer.html">blog post describing how reducers work</a>, I described the reducing function transformers on which they were based, and provided explicit examples like <code>mapping</code>, <code>filtering</code> and <code>mapcatting</code>. Because the reducers library intends to deliver an API with the same 'shape' as existing sequence function APIs, these transformers were never exposed a la carte, instead being encapsulated by the macrology of reducers.</p>
</div>
<div class="paragraph">
<p>In working recently on providing algorithmic combinators for core.async, I became more and more convinced of the superiority of reducing function transformers over channel&#8594;channel functions for algorithmic transformation. In fact, I think they are a better way to do many things for which we normally create bespoke replicas of map, filter etc.</p>
</div>
<div class="paragraph">
<p>So, reducing function transformers are getting a name - <strong>transducers</strong>, and first-class support in Clojure core and core.async.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_s_a_transducer">What&#8217;s a Transducer?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To recap that earlier post:</p>
</div>
<div class="paragraph">
<p>A reducing function is just the kind of function you&#8217;d pass to <code>reduce</code> - it takes a result so far and a new input and returns the next result-so-far. In the context of transducers it&#8217;s best to think about this most generally:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>;;reducing function signature
whatever, input -&gt; whatever</code></pre>
</div>
</div>
<div class="paragraph">
<p>and a transducer is a function that takes one reducing function and returns another:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">;;transducer signature
(whatever, input -&gt; whatever) -&gt; (whatever, input -&gt; whatever)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The primary power of transducers comes from their fundamental decoupling - they don&#8217;t care (or know about):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the 'job' being done (what the reducing function does)</p>
</li>
<li>
<p>the context of use (what 'whatever' is)</p>
</li>
<li>
<p>the source of inputs (where input comes from).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The other source of power comes from the fact that transducers compose using ordinary function composition.</p>
</div>
<div class="paragraph">
<p>The reducers library leverages transducers' decoupling from the job, the representation, and the source of inputs to accomplish parallel reduction. But transducers can also be used for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a la carte laziness</p>
</li>
<li>
<p>transformations during collection building</p>
</li>
<li>
<p>collection/iteration/laziness-free transforming reductions</p>
</li>
<li>
<p>channel transformations, event notifications and more.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of this is coming to Clojure core and core.async.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_stuff">New stuff</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Concretely, most of the core sequence functions are gaining a new arity, one shorter than their current shortest, which elides the final collection source argument. This arity will return a transducer that represents the same logic, independent of lazy sequence processing.</p>
</div>
<div class="paragraph">
<p>Thus:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">;;look Ma, no collection!
(map f)</code></pre>
</div>
</div>
<div class="paragraph">
<p>returns a 'mapping' transducer. filter et al get similar support.</p>
</div>
<div class="paragraph">
<p>You can build a 'stack' of transducers using ordinary function composition (comp):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">(def xform (comp (map inc) (filter even?)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>You might notice the similarity between the above comp and a call to &#8594;&gt;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">(-&gt;&gt; aseq (map inc) (filter even?))</code></pre>
</div>
</div>
<div class="paragraph">
<p>One way to think of transducers is like &#8594;&gt; but independent of the job (lazy sequence creation) and the source of inputs (aseq).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transducers_in_action">Transducers in action</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you&#8217;ve got a transducer, what can you do with it? <em><strong>An open set of things.</strong></em></p>
</div>
<div class="paragraph">
<p>For instance, given the above transducer and some data in a vector, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>lazily transform the data (one lazy sequence, not three as with composed sequence functions)<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>(sequence xform data)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>reduce with a transformation (no laziness, just a loop)<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>(transduce xform + 0 data)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>build one collection from a transformation of another, again no laziness<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>(into [] xform data)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>create a recipe for a transformation, which can be subsequently sequenced, iterated or reduced<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>(iteration xform data)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>or use the same transducer to transform everything that goes through a channel<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>(chan 1 xform)</pre>
</div>
</div>
<div class="paragraph">
<p>The latter demonstrates the corresponding new capability of core.async channels - they can take transducers.</p>
</div>
<div class="paragraph">
<p>This post is just to serve as a heads up on what the ongoing work is about. There will be more explanations, tutorials and derivations to follow, here and elsewhere.</p>
</div>
<div class="paragraph">
<p>I&#8217;m excited about transducers and the power they bring, and I hope you are too!</p>
</div>
<div class="paragraph">
<p>Rich</p>
</div>
</div>
</div>
    </div>
  </div>
</div>

  <div class="w-section clj-footer">
    <div class="w-container clj-footer-links-container">
      <div class="w-row">
        <div class="w-col w-col-3 w-col-small-6 w-col-tiny-6">
          <h6 class="clj-footer-heading">Community</h6><a href="http://igeldev.github.io/clojure-site-russian/community/resources" class="clj-footer-link">Resources</a><a href="http://igeldev.github.io/clojure-site-russian/community/contributing" class="clj-footer-link">Contributing</a><a href="http://igeldev.github.io/clojure-site-russian/community/companies" class="clj-footer-link">Companies</a>
          <h6 class="clj-footer-heading">Legal</h6><a href="http://igeldev.github.io/clojure-site-russian/community/license" class="clj-footer-link">License</a><a href="http://igeldev.github.io/clojure-site-russian/privacy" class="clj-footer-link">Privacy Policy</a>
        </div>
        <div class="w-col w-col-3 w-col-small-6 w-col-tiny-6">
          <h6 class="clj-footer-heading">Documentation</h6><a href="http://igeldev.github.io/clojure-site-russian/about/rationale" class="clj-footer-link">Overview</a><a href="http://igeldev.github.io/clojure-site-russian/reference/documentation" class="clj-footer-link">Reference</a><a href="http://igeldev.github.io/clojure-site-russian/api/api" class="clj-footer-link">API</a><a href="http://igeldev.github.io/clojure-site-russian/guides/guides" class="clj-footer-link">Guides</a><a href="http://igeldev.github.io/clojure-site-russian/community/libraries" class="clj-footer-link">Libraries &amp; Tools</a>
        </div>
        <div class="w-col w-col-3 w-col-small-6 w-col-tiny-6">
          <h6 class="clj-footer-heading">Updates</h6><a href="http://igeldev.github.io/clojure-site-russian/news/news" class="clj-footer-link">News</a><a href="http://igeldev.github.io/clojure-site-russian/community/events" class="clj-footer-link">Events</a>
          <h6 class="clj-footer-heading">ETC</h6><a href="https://www.youtube.com/user/ClojureTV" class="clj-footer-link">Video</a><a href="http://igeldev.github.io/clojure-site-russian/community/books" class="clj-footer-link">Books</a><a href="http://igeldev.github.io/clojure-site-russian/community/swag" class="clj-footer-link">Swag</a>
        </div>
        <div class="w-col w-col-3 w-col-small-6 w-col-tiny-6">
          <h6 class="clj-footer-heading">Code</h6><a href="http://igeldev.github.io/clojure-site-russian/community/downloads" class="clj-footer-link">Releases</a><a href="https://github.com/clojure/clojure/" class="clj-footer-link">Source</a><a href="http://igeldev.github.io/clojure-site-russian/about/clojurescript" class="clj-footer-link">ClojureScript</a><a href="http://igeldev.github.io/clojure-site-russian/about/clojureclr" class="clj-footer-link">ClojureCLR</a>
        </div>
      </div>
    </div>
    <div class="w-container clj-footer-legal-container">
      <div class="w-clearfix clj-footer-legal">
        <div class="clj-footer-logo">&nbsp;</div>
        <div class="clj-footer-legal-links">
          <div class="clj-footer-copyright">Copyright 2008-2016 Rich Hickey | <a class="clj-footer-sub-link" href="http://igeldev.github.io/clojure-site-russian/privacy">Privacy Policy</a><br/>Published 2017-05-17
          </div>
          <div class="clj-footer-designed-by">Logo &amp; site design by <a class="clj-footer-sub-link" href="http://tomhickey.com/">Tom Hickey</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script type="text/javascript" src="../../../../js/webflow.js"></script>
  <script type="text/javascript" src="../../../../js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!--[if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif]-->
</body>
</html>
